  - hosts: localhost
    connection: local 
    tasks:
      - name: apt-get update
        apt:
          update_cache: yes
          cache_valid_time: 3600
        become: true
        become_user: root
      - name: install packages
        apt:
          name:
          - less
          - unzip
          - curl
          state: present
          update_cache: true
        become: true
        become_user: root

      - name: Install az
        shell: |    
          curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash
      - name: Install aws
        shell: |    
          curl -L "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"
          unzip awscliv2.zip
          sudo ./aws/install
          rm -R ./aws awscliv2.zip 
      - name: Install AWS SAM cli
        shell: |  
          curl -L https://github.com/aws/aws-sam-cli/releases/latest/download/aws-sam-cli-linux-x86_64.zip -o aws-sam-cli.zip
          unzip aws-sam-cli.zip -d sam-installation
          sudo ./sam-installation/install
          sam --version
          rm -R ./sam-installation  aws-sam-cli.zip
      
